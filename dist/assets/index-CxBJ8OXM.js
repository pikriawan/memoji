var S=Object.defineProperty;var F=(h,t,e)=>t in h?S(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var g=(h,t,e)=>F(h,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();class A{constructor(t,e){this.width=t,this.height=e,this.scene=null,this.canvas=document.createElement("canvas"),this.canvas.width=this.width*devicePixelRatio,this.canvas.height=this.height*devicePixelRatio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.touchAction="none",this.canvas.style.backgroundColor="black",document.body.append(this.canvas),this.context=this.canvas.getContext("2d"),this.context.scale(devicePixelRatio,devicePixelRatio),this.assets=new Map,this.assetsLoaded=0,this.isAllAssetsLoaded=!1,this.isPaused=!1,this.fps=60,this.fpsInterval=1e3/this.fps,this.startTime=null,this.currentTime=null,requestAnimationFrame(this.animate.bind(this)),this.preload&&this.preload(),this.addAssetsLoadListener()}animate(t){if(this.isPaused)return;requestAnimationFrame(this.animate.bind(this)),this.currentTime=t,this.startTime===null&&(this.startTime=this.currentTime);const e=this.currentTime-this.startTime;e>this.fpsInterval&&(this.startTime=this.currentTime-e%this.fpsInterval,this.loop())}loop(){this.context.clearRect(0,0,this.width,this.height),this.scene&&(this.isAllAssetsLoaded&&!this.scene.isCreated&&this.scene.create&&(this.scene.isCreated=!0,this.scene.create()),this.scene.loop(),this.scene.update&&this.scene.update())}addAssetsLoadListener(){for(const t of this.assets.values()){let e="";t instanceof Image?e="load":t instanceof Audio&&(e="canplaythrough"),t.addEventListener(e,()=>{this.assetsLoaded++,this.assetsLoaded==this.assets.size&&(this.isAllAssetsLoaded=!0)})}}resume(){this.isPaused=!1,requestAnimationFrame(this.animate.bind(this))}pause(){this.isPaused=!0}loadImage(t,e){const s=new Image;s.src=e,this.assets.set(t,s)}loadSound(t,e){const s=new Audio(e);this.assets.set(t,s)}setScene(t){this.scene&&this.scene.destroy(),this.scene=t,this.scene.preload&&this.scene.preload()}playSound(t){let e=this.assets.get(t);e instanceof Audio&&(e=new Audio(e.src),e.play())}}class L extends A{preload(){this.loadImage("background","images/background.png"),this.loadImage("logo","images/logo.png"),this.loadImage("button-easy","images/button-easy.png"),this.loadImage("button-medium","images/button-medium.png"),this.loadImage("button-hard","images/button-hard.png"),this.loadImage("button-back","images/button-back.png"),this.loadImage("arrows","images/arrows.png"),this.loadImage("numbers","images/numbers.png"),this.loadImage("card-back","images/card-back.png"),this.loadImage("message-lose","images/lose.png"),this.loadImage("message-win","images/win.png");for(let t=1;t<=30;t++)this.loadImage("card-"+t,"images/card-"+t+".png");this.loadSound("click","sounds/click.wav"),this.loadSound("flip","sounds/flip.wav"),this.loadSound("lose","sounds/lose.wav"),this.loadSound("win","sounds/win.wav")}}class x{constructor(t,e,s,i,n){this.scene=t,this.x=e,this.y=s,this.width=i,this.height=n,this.eventHandlers=new Map}on(t,e){const s=i=>{const n=i.target.getBoundingClientRect(),a=i.clientX-n.x,r=i.clientY-n.y;a>=this.x&&a<=this.x+this.width&&r>=this.y&&r<=this.y+this.height&&e(i)};this.eventHandlers.has(t)||this.eventHandlers.set(t,new Map),this.eventHandlers.get(t).set(e,s),this.scene.game.canvas.addEventListener(t,s)}off(t,e){this.eventHandlers.has(t)&&this.eventHandlers.get(t).get(e)&&(this.scene.game.canvas.removeEventListener(t,this.eventHandlers.get(t).get(e)),this.eventHandlers.get(t).delete(e),this.eventHandlers.get(t).size===0&&this.eventHandlers.delete(t))}destroy(){for(const[t,e]of this.eventHandlers.entries())for(const s of e.values())this.scene.game.canvas.removeEventListener(t,s);this.eventHandlers.clear()}}class T extends x{constructor(t,e,s){super(t,e,s,200,10),this.progress=0}update(){this.progress=this.scene.game.assetsLoaded/this.scene.game.assets.size}draw(){this.scene.game.context.beginPath(),this.scene.game.context.rect(this.x,this.y,this.width,this.height),this.scene.game.context.strokeStyle="white",this.scene.game.context.stroke(),this.scene.game.context.closePath(),this.scene.game.context.beginPath(),this.scene.game.context.rect(this.x,this.y,this.progress*this.width,this.height),this.scene.game.context.fillStyle="white",this.scene.game.context.fill(),this.scene.game.context.closePath()}}class f{constructor(t){this.game=t,this.isCreated=!1,this.objects=new Set}loop(){for(const t of this.objects.values())t.update&&t.update(),t.draw&&t.draw()}addObject(t){this.objects.add(t)}removeObject(t){t.destroy(),this.objects.delete(t)}destroy(){for(const t of this.objects)this.removeObject(t)}}class o{constructor(t,e,s,i,n,a){this.imageKey=t,this.x=e,this.y=s,this.width=i,this.height=n,a||(a=1),this.duration=a}}class w extends x{constructor(t,e,s,i,n,a){super(t,s,i,n,a),this.frame=e,this.animations=new Map,this.currentAnimation=null,this.isAnimating=!1,this.frameIndex=0,this.frameCounter=0}play(t){this.currentAnimation=t,this.isAnimating=!0}update(){if(this.isAnimating){const t=this.animations.get(this.currentAnimation),e=t[this.frameIndex];this.frame=e,this.frameCounter++,this.frameCounter>=e.duration&&(this.frameCounter=0,this.frameIndex++),this.frameIndex>=t.length&&(this.currentAnimation=null,this.isAnimating=!1,this.frameIndex=0)}}draw(){const t=this.scene.game.assets.get(this.frame.imageKey);t instanceof Image&&this.scene.game.context.drawImage(t,this.frame.x,this.frame.y,this.frame.width,this.frame.height,this.x,this.y,this.width,this.height)}}class O extends w{constructor(t,e,s,i,n,a){super(t,new o("card-back",0,0,240,360),s,i,n,a),this.imageKey=e,this.isOpen=!1,this.isForceDisabled=!1,this.isDisabled=!1,this.isClosing=!1,this.closeDelay=60,this.closeCounter=0;const r=[];for(let l=0;l<7;l++)r.push(new o("card-back",l*240,0,240,360));for(let l=7;l>0;l--)r.push(new o(this.imageKey,(l-1)*240,0,240,360));this.animations.set("open",r),this.animations.set("close",r.toReversed()),this.on("click",()=>{this.isDisabled||this.onClick()})}update(){super.update(),this.isForceDisabled?this.isDisabled=!0:this.isDisabled=this.isAnimating||this.isOpen,this.isClosing&&this.closeCounter++,this.closeCounter>=this.closeDelay&&(this.isClosing=!1,this.closeCounter=0,this.close()),!this.isAnimating&&this.willClose&&(this.willClose=!1,this.close())}disable(){this.isForceDisabled=!0}open(){this.isOpen=!0,this.play("open"),this.scene.game.playSound("flip")}close(){this.isOpen=!1,this.play("close")}closeLazy(){this.isClosing=!0}onClick(){if(this.scene.pendingCard==null){this.scene.pendingCard=this,this.open();for(let t=0;t<this.scene.cards.length;t++)this.scene.cards[t].isClosing&&(this.scene.cards[t].isClosing=!1,this.scene.cards[t].closeCounter=0,this.scene.cards[t].willClose=!0)}else this.scene.decreaseMove(),this.imageKey===this.scene.pendingCard.imageKey?(this.scene.pendingCard=null,this.open(),this.scene.updateStatus()):(this.scene.pendingCard.closeLazy(),this.scene.pendingCard=null,this.open(),this.closeLazy(),this.scene.updateStatus())}}class H extends x{constructor(t,e,s,i){super(t,s,i,null,null),this.counter=e,this.arrowsFrame=new o("arrows",0,0,77,77),this.arrowsWidth=25,this.arrowsHeight=25,this.arrowsGapX=4,this.numberFrames=null,this.numbersWidth=null,this.numbersHeight=56,this.numberWidth=22,this.updateFrames()}generateFramesFromCounter(t){let e=t.toString().split("").map(i=>parseInt(i));const s=[];for(let i=0;i<e.length;i++)s[i]=new o("numbers",e[i]*66,0,66,168);return s}updateFrames(){this.numberFrames=this.generateFramesFromCounter(this.counter),this.numbersWidth=22*this.numberFrames.length,this.width=this.arrowsWidth+this.arrowsGapX+this.numbersWidth,this.height=this.numbersHeight}decrease(){this.counter>0&&this.counter--,this.updateFrames()}draw(){const t=this.scene.game.assets.get(this.arrowsFrame.imageKey);t instanceof Image&&this.scene.game.context.drawImage(t,this.arrowsFrame.x,this.arrowsFrame.y,this.arrowsFrame.width,this.arrowsFrame.height,this.x,this.y+(this.height-this.arrowsHeight)*.5,this.arrowsWidth,this.arrowsHeight);for(let e=0;e<this.numberFrames.length;e++){const s=this.scene.game.assets.get(this.numberFrames[e].imageKey);t instanceof Image&&this.scene.game.context.drawImage(s,this.numberFrames[e].x,this.numberFrames[e].y,this.numberFrames[e].width,this.numberFrames[e].height,this.x+this.arrowsWidth+this.arrowsGapX+this.numberWidth*e,this.y,this.numberWidth,this.numbersHeight)}}}class p extends x{constructor(t,e,s,i,n,a){super(t,s,i,n,a),this.frame=e}draw(){const t=this.scene.game.assets.get(this.frame.imageKey);t instanceof Image&&this.scene.game.context.drawImage(t,this.frame.x,this.frame.y,this.frame.width,this.frame.height,this.x,this.y,this.width,this.height)}}class v extends w{constructor(t,e,s){super(t,new o("button-back",0,0,568,168),e,s,189,56),this.wasClicked=!1,this.animations.set("press",[new o("button-back",568,0,568,168)]),this.animations.set("click",[new o("button-back",0,0,568,168,5)]),this.on("pointerdown",()=>{this.play("press")}),this.on("pointerup",()=>{this.play("click"),this.wasClicked=!0})}update(){super.update(),this.currentAnimation===null&&this.wasClicked&&(this.wasClicked=!1,this.onClick())}onClick(){this.scene.game.playSound("click"),this.scene.game.setScene(new I(this.scene.game))}}class D extends f{create(){const t=new p(this,new o("background",0,0,2751,1236),0,0,this.game.width,this.game.height);this.addObject(t);const e=32,s=new p(this,new o("message-lose",0,0,531,84),null,null,177,28),i=new v(this,null,null),n=s.height+e+i.height;let r=(this.game.height-n)*.5;s.x=(this.game.width-s.width)*.5,s.y=r,this.addObject(s),r+=s.height+e,i.x=(this.game.width-i.width)*.5,i.y=r,this.addObject(i)}}class Y extends f{create(){const t=new p(this,new o("background",0,0,2751,1236),0,0,this.game.width,this.game.height);this.addObject(t);const e=32,s=new p(this,new o("message-win",0,0,632,100),null,null,210,33),i=new v(this,null,null),n=s.height+e+i.height;let r=(this.game.height-n)*.5;s.x=(this.game.width-s.width)*.5,s.y=r,this.addObject(s),r+=s.height+e,i.x=(this.game.width-i.width)*.5,i.y=r,this.addObject(i)}}const c=class c extends f{constructor(t,e){super(t),this.difficulty=e,this.cardWidth=60,this.cardHeight=90,this.redirectDelay=60,this.redirectCounter=0,this.isRedirecting=!1,this.status=c.STATUS_PENDING,this.row=null,this.column=null,this.move=null,this.cards=[],this.pendingCard=null,this.moveCounter=null,this.totalCards=30}create(){switch(this.difficulty){case c.DIFFICULTY_EASY:this.row=2,this.column=4,this.move=16;break;case c.DIFFICULTY_MEDIUM:this.row=2,this.column=5,this.move=20;break;case c.DIFFICULTY_HARD:this.row=3,this.column=8,this.move=48;break}const t=new p(this,new o("background",0,0,2751,1236),0,0,this.game.width,this.game.height);this.addObject(t);const e=32,s=8;this.moveCounter=new H(this,this.move,null,null),this.cards=this.generateRandomCards();const i=this.column*this.cardWidth+(this.column-1)*s,n=(this.game.width-i)*.5,a=this.row*this.cardHeight+(this.row-1)*s,r=this.moveCounter.height+e+a;let b=(this.game.height-r)*.5;this.moveCounter.x=(this.game.width-this.moveCounter.width)*.5,this.moveCounter.y=b,this.addObject(this.moveCounter),b+=this.moveCounter.height+e;let d=0;for(let y=0;y<this.column;y++)for(let C=0;C<this.row;C++)this.cards[d].x=n+y*this.cardWidth+y*s,this.cards[d].y=b+C*this.cardHeight+C*s,this.addObject(this.cards[d]),d++}update(){this.isRedirecting&&this.redirectCounter++,this.redirectCounter===this.redirectDelay&&(this.status==c.STATUS_LOSE?(this.game.playSound("lose"),this.game.setScene(new D(this.game))):(this.game.playSound("win"),this.game.setScene(new Y(this.game))))}decreaseMove(){this.move--,this.moveCounter.decrease()}shuffle(t){const e=t.slice();for(let s=0;s<e.length;s++){const i=Math.floor(Math.random()*e.length),n=e[s];e[s]=e[i],e[i]=n}return e}duplicate(t){return t.concat(t)}generateRandomCardsIndex(){const t=this.row*this.column*.5;let e=[];for(let s=0;s<this.totalCards;s++)e[s]=s+1;return e=this.shuffle(e),e.slice(0,t)}generateRandomCards(){let t=this.duplicate(this.generateRandomCardsIndex());t=this.shuffle(t);const e=[];for(let s=0;s<t.length;s++)e[s]=new O(this,"card-"+t[s],null,null,this.cardWidth,this.cardHeight);return e}checkStatus(){let t=!0;for(const e of this.cards)e.isOpen||(t=!1);return t?c.STATUS_WIN:this.move==0?c.STATUS_LOSE:c.STATUS_PENDING}updateStatus(){if(this.status=this.checkStatus(),this.status!=c.STATUS_PENDING){this.redirect();for(let t=0;t<this.cards.length;t++)this.cards[t].disable(),this.cards[t].isClosing&&(this.cards[t].isClosing=!1,this.cards[t].closeCounter=0,this.cards[t].willClose=!1)}}redirect(){this.isRedirecting=!0}};g(c,"DIFFICULTY_EASY",0),g(c,"DIFFICULTY_MEDIUM",1),g(c,"DIFFICULTY_HARD",2),g(c,"STATUS_PENDING",0),g(c,"STATUS_LOSE",1),g(c,"STATUS_WIN",2);let m=c;class j extends w{constructor(t,e,s){super(t,new o("button-easy",0,0,568,168),e,s,189,56),this.wasClicked=!1,this.animations.set("press",[new o("button-easy",568,0,568,168)]),this.animations.set("click",[new o("button-easy",0,0,568,168,5)]),this.on("pointerdown",()=>{this.play("press")}),this.on("pointerup",()=>{this.play("click"),this.wasClicked=!0})}update(){super.update(),this.currentAnimation===null&&this.wasClicked&&(this.wasClicked=!1,this.onClick())}onClick(){this.scene.game.playSound("click"),this.scene.game.setScene(new m(this.scene.game,m.DIFFICULTY_EASY))}}class E extends w{constructor(t,e,s){super(t,new o("button-hard",0,0,568,168),e,s,189,56),this.wasClicked=!1,this.animations.set("press",[new o("button-hard",568,0,568,168)]),this.animations.set("click",[new o("button-hard",0,0,568,168,5)]),this.on("pointerdown",()=>{this.play("press")}),this.on("pointerup",()=>{this.play("click"),this.wasClicked=!0})}update(){super.update(),this.currentAnimation===null&&this.wasClicked&&(this.wasClicked=!1,this.onClick())}onClick(){this.scene.game.playSound("click"),this.scene.game.setScene(new m(this.scene.game,m.DIFFICULTY_HARD))}}class P extends w{constructor(t,e,s){super(t,new o("button-medium",0,0,568,168),e,s,189,56),this.wasClicked=!1,this.animations.set("press",[new o("button-medium",568,0,568,168)]),this.animations.set("click",[new o("button-medium",0,0,568,168,5)]),this.on("pointerdown",()=>{this.play("press")}),this.on("pointerup",()=>{this.play("click"),this.wasClicked=!0})}update(){super.update(),this.currentAnimation===null&&this.wasClicked&&(this.wasClicked=!1,this.onClick())}onClick(){this.scene.game.playSound("click"),this.scene.game.setScene(new m(this.scene.game,m.DIFFICULTY_MEDIUM))}}class I extends f{create(){const t=new p(this,new o("background",0,0,2751,1236),0,0,this.game.width,this.game.height);this.addObject(t);const e=32,s=16,i=new p(this,new o("logo",0,0,471,202),null,null,235,101),n=new j(this,null,null),a=new P(this,null,null),r=new E(this,null,null),l=i.height+e+n.height+s+a.height+s+r.height;let d=(this.game.height-l)*.5;i.x=(this.game.width-i.width)*.5,i.y=d,this.addObject(i),d+=i.height+e,n.x=(this.game.width-n.width)*.5,n.y=d,this.addObject(n),d+=n.height+s,a.x=(this.game.width-a.width)*.5,a.y=d,this.addObject(a),d+=a.height+s,r.x=(this.game.width-r.width)*.5,r.y=d,this.addObject(r)}}class U extends f{preload(){const t=new T(this,null,null);t.x=(this.game.width-t.width)*.5,t.y=(this.game.height-t.height)*.5,this.addObject(t)}update(){this.game.assetsLoaded===this.game.assets.size&&this.game.setScene(new I(this.game))}}const k=document.createElement("button");k.textContent="Mainkan Memoji";document.body.append(k);let u;k.addEventListener("click",()=>{if(u===void 0){const h=Math.max(screen.width,screen.height),t=Math.min(screen.width,screen.height);u=new L(h,t),u.setScene(new U(u))}addEventListener("fullscreenchange",()=>{document.fullscreenElement?(u.resume(),u.canvas.style.display="block",screen.orientation.lock("landscape").catch(()=>{})):(u.pause(),u.canvas.style.display="none",screen.orientation.unlock())}),u.canvas.requestFullscreen()});
